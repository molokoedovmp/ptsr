# ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞ –ü–¢–°–† –≠–∫—Å–ø–µ—Ä—Ç

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å

1. **PostgreSQL —Å–µ—Ä–≤–µ—Ä** - –≤–∞—à —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å PostgreSQL
2. **–î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
   - –•–æ—Å—Ç (IP –∏–ª–∏ –¥–æ–º–µ–Ω)
   - –ü–æ—Ä—Ç (–æ–±—ã—á–Ω–æ 5432)
   - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü–∞—Ä–æ–ª—å

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞ 5 —à–∞–≥–æ–≤

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
cd /Users/mikhailmolokoedov/Documents/ptsr
npm install
```

‚è±Ô∏è –ó–∞–π–º–µ—Ç 2-3 –º–∏–Ω—É—Ç—ã

---

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –≤–∞—à–µ–º—É PostgreSQL –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
CREATE DATABASE ptsr_expert;
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ - —É–∫–∞–∂–µ—Ç–µ –µ–≥–æ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ.

---

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
touch .env
```

–û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ):

```env
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
DATABASE_URL="postgresql://username:password@your-host:5432/ptsr_expert?schema=public"

# NextAuth –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á-–∑–¥–µ—Å—å"
```

**–ü—Ä–∏–º–µ—Ä:**
```env
DATABASE_URL="postgresql://ptsr_user:MyPass123@192.168.1.100:5432/ptsr_expert?schema=public"
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="Wf3K9xR8mN4pL2qY7tV5hB6jC1zD0sA3"
```

üí° **–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á:**
```bash
openssl rand -base64 32
```

---

### –®–∞–≥ 4: –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã

```bash
npx prisma db push
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –≤–∞—à–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö! ‚ú®

–í—ã —É–≤–∏–¥–∏—Ç–µ:
```
‚úî Generated Prisma Client
‚úî The database is now in sync with your schema
```

---

### –®–∞–≥ 5: –°–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ SQL**

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –≤–∞—à–µ–π PostgreSQL:

```sql
-- –≠—Ç–æ—Ç –ø–∞—Ä–æ–ª—å: admin123
INSERT INTO users (
  id, 
  email, 
  password, 
  full_name, 
  roles, 
  created_at, 
  updated_at
) VALUES (
  gen_random_uuid(),
  'admin@ptsr-expert.ru',
  '$2a$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewY5lXnvZJm.Qa0S',
  '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
  ARRAY['ADMIN']::user_role[],
  NOW(),
  NOW()
);
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ Node.js**

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `scripts/create-admin.js`:

```javascript
const { PrismaClient } = require('@prisma/client')
const bcrypt = require('bcryptjs')

const prisma = new PrismaClient()

async function main() {
  const hashedPassword = await bcrypt.hash('admin123', 12)
  
  const admin = await prisma.user.create({
    data: {
      email: 'admin@ptsr-expert.ru',
      password: hashedPassword,
      fullName: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
      roles: ['ADMIN'],
    },
  })

  console.log('‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–Ω:', admin.email)
  console.log('–ü–∞—Ä–æ–ª—å: admin123')
}

main()
  .catch(console.error)
  .finally(() => prisma.$disconnect())
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
node scripts/create-admin.js
```

---

## üéâ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: **http://localhost:3000**

---

## üîë –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ http://localhost:3000/login
2. –í–≤–µ–¥–∏—Ç–µ:
   - **Email:** `admin@ptsr-expert.ru`
   - **–ü–∞—Ä–æ–ª—å:** `admin123`
3. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏"

‚úÖ –ì–æ—Ç–æ–≤–æ! –í—ã –≤–æ—à–ª–∏ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä!

---

## üì± –ß—Ç–æ –¥–∞–ª—å—à–µ?

–í—ã –º–æ–∂–µ—Ç–µ:
- üè† –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- üë§ –ó–∞–π—Ç–∏ –≤ –ø—Ä–æ—Ñ–∏–ª—å
- ‚öôÔ∏è –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ—è–≤–∏—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–ê–¥–º–∏–Ω")
- üìä –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å–∏ –≤ –¥–Ω–µ–≤–Ω–∏–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
- üìù –í–µ—Å—Ç–∏ –¥–Ω–µ–≤–Ω–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## üóÑÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–û—Ç–∫—Ä–æ–π—Ç–µ Prisma Studio - –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –ë–î:

```bash
npx prisma studio
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ http://localhost:5555

–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ:
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
- –î–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–æ–ª–∏

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏:
- ‚úÖ `npm run dev` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ http://localhost:3000 –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –ú–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ –∫–∞–∫ admin
- ‚úÖ `npx prisma studio` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã

---

## üÜò –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞: "Can't reach database"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DATABASE_URL –≤ `.env`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 5432 –æ—Ç–∫—Ä—ã—Ç
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ psql

```bash
psql -h your-host -U your-user -d ptsr_expert
```

### –û—à–∏–±–∫–∞: "Module not found @prisma/client"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
npx prisma generate
npm install
```

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ: "–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å"

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–Ω (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ `npx prisma studio`)
2. Email —Ç–æ—á–Ω–æ: `admin@ptsr-expert.ru`
3. –ü–∞—Ä–æ–ª—å —Ç–æ—á–Ω–æ: `admin123`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É `users` –≤ Prisma Studio

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `SETUP_INSTRUCTIONS.md` - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `DATABASE_SETUP.md` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î
- `README.md` - –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ
- `SECURITY_DOCUMENTATION.md` - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

---

## üéØ –ò—Ç–æ–≥–æ

1. ‚úÖ `npm install`
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å –ë–î
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env`
4. ‚úÖ `npx prisma db push`
5. ‚úÖ –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∞
6. ‚úÖ `npm run dev`
7. ‚úÖ –í–æ–π—Ç–∏ –∫–∞–∫ admin

**–í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏: ~10 –º–∏–Ω—É—Ç** ‚è±Ô∏è

---

–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç! üöÄ

**–í–æ–ø—Ä–æ—Å—ã?** –°–º–æ—Ç—Ä–∏—Ç–µ `SETUP_INSTRUCTIONS.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

